webpackJsonp([7],{101:function(e,t,a){a(507);var n=a(0)(a(453),a(552),"data-v-0e0e1a8e",null);e.exports=n.exports},453:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),s=new n.a;t.default={name:"addTemp",props:["id","name","status"],data:function(){return{userAccounts:[],templateTypeOptions:[{value:"0",label:"固定模板"},{value:"1",label:"变量模板"}],form:{templateId:"",clientId:"",sign:"",smsType:"10",templateType:"1",content:""},clientId:"",data:[],loading:!1,isAdd:!1,disabledSelect:!1}},mounted:function(){this.id&&(this.form.templateId=this.id,this.getTempInfo()),0!=this.status&&this.status&&(this.disabledSelect=!0),this.getAccountsData()},methods:{getAccountsData:function(){var e=this,t={};t.agentId=localStorage.getItem("id"),s.get("/autoTemplate/autoTemplateAccounts",t).then(function(e){}).catch(function(t){for(var a=[],n=0;n<t.length;n++)a[n]={},a[n].value=t[n].clientid,a[n].label=t[n].clientid+"-"+t[n].name;e.userAccounts=a})},getTempInfo:function(){var e=this;s.get("/autoTemplate/autoTemplateModify?templateId="+this.id).then(function(t){e.form.templateId=t.data.templateId,e.form.clientId=t.data.clientId,e.form.sign=t.data.sign,e.form.smsType=t.data.smsType+"",e.form.templateType=t.data.templateType+"",e.form.content=t.data.content},function(e){})},checkTemp:function(){var e=this.form;if(e.agentId=localStorage.getItem("id"),""==e.clientId)return this.$message.error("请选择用户账号"),!1;if(e.sign.length>12||e.sign.length<2)return this.$message.error("请输入正确的签名"),!1;if(!/^([a-z0-9\u4E00-\u9FA5])+$/i.test(e.sign))return this.$message.error("签名内容请勿输入特殊字符"),!1;if(e.content.length+e.sign.length>500)return this.$message.error("模板内容+签名长度超过500"),!1;if(/([\u4E00-\u9FA5]|[\（\）\《\》\——\；\，\。\“\”\！\【\】])/.test(e.content)){if(-1!=e.content.indexOf("【")||-1!=e.content.indexOf("】")||-1!=e.content.indexOf("【】"))return this.$message.error("中文短信模板内容不能包含【,】和【】"),!1}else if(-1!=e.content.indexOf("[")||-1!=e.content.indexOf("]")||-1!=e.content.indexOf("【")||-1!=e.content.indexOf("】"))return this.$message.error("英文短信模板内容不能包含[,]和[]"),!1;var t=RegExp("\\{.*?\\}","g");return 0==e.templateType&&t.test(e.content)?(this.$message.error("模板内容中包含变量，请修改模板类型"),!1):e},add:function(e,t){var a=this,e=this.checkTemp();e&&s.post("/autoTemplate/autoTemplateSave",e,{emulateJSON:!0}).then(function(e){a.$message({message:e.msg,type:"success"}),t?(a.isAdd=!0,t.call(a)):(a.$emit("goBack"),a.$emit("refresh"))}).catch(function(e){a.$message.error(e.msg)})},addNotClose:function(){var e=this.checkTemp();e&&this.add(e,this.clearForm)},clearForm:function(){this.form={clientId:"",sign:"",smsType:"10",templateType:"1",content:"",templateId:""}},goBack:function(){this.isAdd&&this.$emit("refresh"),this.isAdd=!1,this.$emit("goBack")}}}},478:function(e,t,a){t=e.exports=a(435)(!0),t.push([e.i,".el-form-item[data-v-0e0e1a8e]{margin-bottom:10px}.el-form[data-v-0e0e1a8e]{width:100%!important}textarea[data-v-0e0e1a8e]{resize:none!important}.mask-ctx[data-v-0e0e1a8e]{width:650px}.mask-ctx .ctx[data-v-0e0e1a8e]{padding:30px 50px;background-color:#fff}.mask-ctx .ctx .example[data-v-0e0e1a8e]{text-align:right;width:82px;vertical-align:middle;font-size:14px;line-height:1;padding:11px 18px 11px 0}.mask-ctx .ctx .example span[data-v-0e0e1a8e]{color:#666;background-color:#e7e7e7;padding:2px 5px}.mask-ctx .ctx .example-ctx p[data-v-0e0e1a8e]{line-height:26px;color:#888}.mask-ctx .ctx .btn[data-v-0e0e1a8e]{width:140px}.mask-ctx .words[data-v-0e0e1a8e]{text-align:center;height:40px;line-height:40px;border:1px solid #2fb26a;background-color:skyblue;margin-bottom:40px}.mask-ctx .w460[data-v-0e0e1a8e]{width:460px}","",{version:3,sources:["D:/Ucpaas/code/smsa-agent-oem-F2E/src/components/AutoTemplateAdd/AutoTemplateAdd.vue"],names:[],mappings:"AACA,+BACE,kBAAoB,CACrB,AACD,0BACE,oBAAuB,CACxB,AACD,0BACE,qBAAwB,CACzB,AACD,2BACE,WAAa,CACd,AACD,gCACI,kBAAmB,AACnB,qBAAuB,CAC1B,AACD,yCACM,iBAAkB,AAClB,WAAY,AACZ,sBAAuB,AACvB,eAAgB,AAChB,cAAe,AACf,wBAA0B,CAC/B,AACD,8CACQ,WAAY,AACZ,yBAA0B,AAC1B,eAAiB,CACxB,AACD,+CACM,iBAAkB,AAClB,UAAe,CACpB,AACD,qCACM,WAAa,CAClB,AACD,kCACI,kBAAmB,AACnB,YAAa,AACb,iBAAkB,AAClB,yBAA0B,AAC1B,yBAA0B,AAC1B,kBAAoB,CACvB,AACD,iCACI,WAAa,CAChB",file:"AutoTemplateAdd.vue",sourcesContent:["\n.el-form-item[data-v-0e0e1a8e] {\n  margin-bottom: 10px;\n}\n.el-form[data-v-0e0e1a8e] {\n  width: 100% !important;\n}\ntextarea[data-v-0e0e1a8e] {\n  resize: none !important;\n}\n.mask-ctx[data-v-0e0e1a8e] {\n  width: 650px;\n}\n.mask-ctx .ctx[data-v-0e0e1a8e] {\n    padding: 30px 50px;\n    background-color: #FFF;\n}\n.mask-ctx .ctx .example[data-v-0e0e1a8e] {\n      text-align: right;\n      width: 82px;\n      vertical-align: middle;\n      font-size: 14px;\n      line-height: 1;\n      padding: 11px 18px 11px 0;\n}\n.mask-ctx .ctx .example span[data-v-0e0e1a8e] {\n        color: #666;\n        background-color: #e7e7e7;\n        padding: 2px 5px;\n}\n.mask-ctx .ctx .example-ctx p[data-v-0e0e1a8e] {\n      line-height: 26px;\n      color: #888888;\n}\n.mask-ctx .ctx .btn[data-v-0e0e1a8e] {\n      width: 140px;\n}\n.mask-ctx .words[data-v-0e0e1a8e] {\n    text-align: center;\n    height: 40px;\n    line-height: 40px;\n    border: 1px solid #2fb26a;\n    background-color: skyblue;\n    margin-bottom: 40px;\n}\n.mask-ctx .w460[data-v-0e0e1a8e] {\n    width: 460px;\n}\n"],sourceRoot:""}])},507:function(e,t,a){var n=a(478);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(436)("a731a65e",n,!0)},552:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mask"},[a("div",{staticClass:"mask-ctx"},[a("div",{staticClass:"mask-header"},[e._v(e._s(e.name)),a("span",{staticClass:"fa fa-close",on:{click:e.goBack}})]),a("div",{staticClass:"ctx"},[a("el-form",{staticClass:"dial",attrs:{model:e.form}},[a("el-form-item",{staticClass:"mt ml15",attrs:{label:"子账户："}},[a("span",{staticClass:"fl"},[a("el-select",{staticClass:"fl border w460",attrs:{placeholder:"请输入子账户",filterable:"filterable",disabled:e.disabledSelect},model:{value:e.form.clientId,callback:function(t){e.$set(e.form,"clientId",t)},expression:"form.clientId"}},e._l(e.userAccounts,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)]),a("el-form-item",{attrs:{label:"短信签名："}},[a("span",{staticClass:"fl"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.sign,expression:"form.sign"}],staticClass:"input w460",attrs:{type:"text",placeholder:"限2-12个字，中文、英文和数字"},domProps:{value:e.form.sign},on:{input:function(t){t.target.composing||e.$set(e.form,"sign",t.target.value)}}})])]),a("el-form-item",{attrs:{label:"模板属性："}},[a("el-radio",{attrs:{label:"10"},model:{value:e.form.smsType,callback:function(t){e.$set(e.form,"smsType",t)},expression:"form.smsType"}},[e._v("行业")]),a("el-radio",{attrs:{label:"11"},model:{value:e.form.smsType,callback:function(t){e.$set(e.form,"smsType",t)},expression:"form.smsType"}},[e._v("会员营销  ")])],1),a("el-form-item",{attrs:{label:"模板类型："}},[a("el-select",{staticClass:"fl border w460",attrs:{placeholder:"请选择"},model:{value:e.form.templateType,callback:function(t){e.$set(e.form,"templateType",t)},expression:"form.templateType"}},e._l(e.templateTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),a("el-form-item",[a("div",{staticClass:"fl example"},[a("span",[e._v("示例")])]),a("div",{staticClass:"fl example-ctx w460"},[10==e.form.smsType&&1==e.form.templateType?a("div",[a("p",[e._v("验证码示例：您的验证码是{}，如非本人操作，请忽略此条短信。")]),a("p",[e._v("通知示例：尊敬的{}用户，您的账户已入账{}元，请及时查收，如有疑问请联系客服热线。                   ")])]):e._e(),10==e.form.smsType&&0==e.form.templateType?a("div",[a("p",[e._v("因受台风天鸽影响，8月24日全市人民放假一天，请市民注意人身安全。")])]):e._e(),11==e.form.smsType&&0==e.form.templateType?a("div",[a("p",[e._v("欢迎您成为酒店集团会员，我们将竭诚为您服务。如非本人操作，请致电如家客服热线。")])]):e._e(),11==e.form.smsType&&1==e.form.templateType?a("div",[a("p",[e._v("尊敬的{}用户，本店将于下周举行年中大促，退订回复TD。")])]):e._e()])]),a("el-form-item",{attrs:{label:"模板内容："}},[a("el-input",{staticClass:"fl w460",attrs:{type:"textarea",rows:5,placeholder:"请输入模板内容\r\n模板内容、短信签名的总长度不可超过500个字"},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}})],1),a("div",{staticClass:"words"},[e._v("人工审核在30分钟内操作，请耐心等待。（工作时间09:00~22:00）")]),a("div",{staticClass:"tx-c"},[a("a",{staticClass:"btn btn-md btn-green",attrs:{href:"javascript:;"},on:{click:e.add}},[e._v("保存")]),""==e.form.templateId?a("a",{staticClass:"btn btn-md ml10 btn-green",attrs:{href:"javascript:;"},on:{click:e.addNotClose}},[e._v("保存并继续添加")]):e._e(),a("a",{staticClass:"btn btn-md btn-green-block ml10",attrs:{href:"javascript:;"},on:{click:e.goBack}},[e._v("取消   ")])])],1)],1)])])},staticRenderFns:[]}}});
//# sourceMappingURL=7.ce994908f766b18d2ddb.js.map